<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>No pains,no gains</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="No pains,no gains">
<meta property="og:url" content="https://mengxu2018.github.io/page/2/index.html">
<meta property="og:site_name" content="No pains,no gains">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="No pains,no gains">
  
    <link rel="alternate" href="/atom.xml" title="No pains,no gains" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">No pains,no gains</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://mengxu2018.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-powershell-dsc" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/03/powershell-dsc/" class="article-date">
  <time datetime="2020-06-03T12:44:15.000Z" itemprop="datePublished">2020-06-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/03/powershell-dsc/">powershell dsc get started</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="guide"><a href="#guide" class="headerlink" title="guide"></a>guide</h2><p><a href="https://docs.microsoft.com/zh-cn/powershell/scripting/dsc/configurations/write-compile-apply-configuration?view=powershell-7" target="_blank" rel="noopener">https://docs.microsoft.com/zh-cn/powershell/scripting/dsc/configurations/write-compile-apply-configuration?view=powershell-7</a></p>
<h2 id="hello-world"><a href="#hello-world" class="headerlink" title="hello world"></a>hello world</h2><p>注意最后一行的HelloWorld一定要加，否则编译不会生成mof文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Configuration HelloWorld &#123;</span><br><span class="line"></span><br><span class="line">    # Import the module that contains the File resource.</span><br><span class="line">    Import-DscResource -ModuleName PsDesiredStateConfiguration</span><br><span class="line"></span><br><span class="line">    # The Node statement specifies which targets to compile MOF files for, when this configuration is executed.</span><br><span class="line">    Node &apos;localhost&apos; &#123;</span><br><span class="line"></span><br><span class="line">        # The File resource can ensure the state of files, or copy them from a source to a destination with persistent updates.</span><br><span class="line">        File HelloWorld &#123;</span><br><span class="line">            DestinationPath = &quot;d:\work\HelloWorld.txt&quot;</span><br><span class="line">            Ensure = &quot;Present&quot;</span><br><span class="line">            Contents   = &quot;Hello World from DSC!&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">HelloWorld</span><br></pre></td></tr></table></figure></p>
<h2 id="编译运行"><a href="#编译运行" class="headerlink" title="编译运行"></a>编译运行</h2><p>. ./HelloWorld.ps1<br>Start-DscConfiguration -Path .\HelloWorld -Verbose -Wait   //会发现d:\work\HelloWorld.txt</p>
<h2 id="troubleshooting"><a href="#troubleshooting" class="headerlink" title="troubleshooting"></a>troubleshooting</h2><p>powershell ise需要admin打开<br>wrm服务要打开</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://mengxu2018.github.io/2020/06/03/powershell-dsc/" data-id="ckbxofaib0001couxrhqmx242" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/powershell/">powershell</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-jwt-first" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/05/jwt-first/" class="article-date">
  <time datetime="2020-05-05T14:51:52.000Z" itemprop="datePublished">2020-05-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/05/jwt-first/">jwt introduction</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://auth0.com/blog/implementing-jwt-authentication-on-spring-boot/" target="_blank" rel="noopener">https://auth0.com/blog/implementing-jwt-authentication-on-spring-boot/</a></p>
<p><a href="https://github.com/mengxu2018/jwt" target="_blank" rel="noopener">https://github.com/mengxu2018/jwt</a></p>
<p>During the authentication process, when a user successfully logs in using their credentials, a JSON Web Token is returned and must be saved locally (typically in local storage). Whenever the user wants to access a protected route or resource (an endpoint), the user agent must send the JWT, usually in the Authorization header using the Bearer schema, along with the request.</p>
<p>JWT is commonly used for authorization，jwt与authentiation没有关系，用户还是得用户名密码或者open connect id来登录，但是后续的访问资源，可以携带之前收到的jwt token来访问，这个token这个时候就起到授权的作用,看下面的文章更详细的解释jwt的workflow</p>
<p><a href="https://jwt.io/introduction/" target="_blank" rel="noopener">https://jwt.io/introduction/</a><br><img src="/images/client-credentials-grant.png" alt="client-credentials-grant.png"></p>
<ol>
<li>The application or client requests authorization to the authorization server. This is performed through one of the different authorization flows. For example, a typical OpenID Connect compliant web application will go through the /oauth/authorize endpoint using the authorization code flow.</li>
<li>When the authorization is granted, the authorization server returns an access token to the application.</li>
<li>The application uses the access token to access a protected resource (like an API).<br>可以看到jwt也是需要一个authorization server生成一个token，只是后续直接用token访问api就好了 </li>
</ol>
<p><a href="https://www.digitalocean.com/community/tutorials/an-introduction-to-oauth-2" target="_blank" rel="noopener">https://www.digitalocean.com/community/tutorials/an-introduction-to-oauth-2</a></p>
<p><a href="https://www.oauth.com/oauth2-servers/the-resource-server/" target="_blank" rel="noopener">https://www.oauth.com/oauth2-servers/the-resource-server/</a></p>
<p>Oauth2 与 JWT 区别？<br>Token功能不一样，JWT的token是包含用户基本信息的，然后通过加密的方式生成的字符串，服务器端拿到这个token之后不需要再去查询用户基本信息，解析完token之后就能拿到。<br>想想在微服务架构下，用户服务是一个单独的服务，但是其他服务大部分情况下也会需要用户信息，难道要每次用到都去取一次吗？ JWT非常适合微服务。</p>
<p>OAuth2用在使用第三方账号登录的情况(比如使用weibo, qq, github登录某个app)<br>JWT是用在前后端分离, 需要简单的对后台API进行保护时使用.(前后端分离无session, 频繁传用户密码不安全)<br>OAuth2是一个相对复杂的协议, 有4种授权模式, 其中的access code模式在实现时可以使用jwt生成code, 也可以不用. 它们之间没有必然的联系.</p>
<p>总结起来就是jwt很轻量级，<a href="https://www.cnblogs.com/grissom007/p/6294746.html，这个文章可以看下" target="_blank" rel="noopener">https://www.cnblogs.com/grissom007/p/6294746.html，这个文章可以看下</a></p>
<p>oauth2的的资源服务器校验token<br><a href="http://springcloud.cn/view/431" target="_blank" rel="noopener">http://springcloud.cn/view/431</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://mengxu2018.github.io/2020/05/05/jwt-first/" data-id="ck6yot4rb0001csuxuub61mmx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/security/">security</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ansible-setup" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/03/21/ansible-setup/" class="article-date">
  <time datetime="2020-03-21T12:44:15.000Z" itemprop="datePublished">2020-03-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/21/ansible-setup/">ansible setup</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="先升级到python3"><a href="#先升级到python3" class="headerlink" title="先升级到python3"></a>先升级到python3</h2><p>参考另外的文章</p>
<h2 id="安装可以下载centos版本的rpm"><a href="#安装可以下载centos版本的rpm" class="headerlink" title="安装可以下载centos版本的rpm"></a>安装可以下载centos版本的rpm</h2><p><a href="https://cbs.centos.org/koji/buildinfo?buildID=27713" target="_blank" rel="noopener">https://cbs.centos.org/koji/buildinfo?buildID=27713</a><br>至于依赖的其他package，可以yum来安装,如果需要管理windows机器就需要使用pip来安装ansible，否则管理windows的python模块不能识别<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install --user ansible</span><br></pre></td></tr></table></figure></p>
<h2 id="ssh免登录"><a href="#ssh免登录" class="headerlink" title="ssh免登录"></a>ssh免登录</h2><p><a href="http://getansible.com/begin/an_zhuang_ansile" target="_blank" rel="noopener">http://getansible.com/begin/an_zhuang_ansile</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 生成ssh key</span><br><span class="line">ssh-keygen</span><br><span class="line"></span><br><span class="line"># 拷贝ssh key到远程主机，ssh的时候就不需要输入密码了</span><br><span class="line">ssh-copy-id remoteuser@remoteserver</span><br><span class="line"></span><br><span class="line"># ssh的时候不会提示是否保存key</span><br><span class="line">$ssh-keyscan remote_servers &gt;&gt; ~/.ssh/known_hosts</span><br></pre></td></tr></table></figure></p>
<p>配置root-&gt;root， ccms-&gt;ccms免登录</p>
<h2 id="ad-hoc-commands"><a href="#ad-hoc-commands" class="headerlink" title="ad-hoc commands"></a>ad-hoc commands</h2><p><a href="https://docs.ansible.com/ansible/latest/user_guide/intro_getting_started.html" target="_blank" rel="noopener">https://docs.ansible.com/ansible/latest/user_guide/intro_getting_started.html</a></p>
<p>下面的命令都可以直接在root执行或者ccms执行<br>ansible all -m copy -a “src=/tmp/xu dest=/tmp/xu2”<br>ansible all -m ping<br>ansible all -a “/sbin/reboot”</p>
<p>如果在root用户下面执行下面的会报错，需要实现root到对方ccms的免登录<br>这个只要执行上面的第二步ssh-copy-id ccms@remoteserver就可以了，因为1，3步在同用户名之间的免登录已经执行过了<br>ansible all -m ping -u ccms</p>
<h2 id="sudo-issue-TODO"><a href="#sudo-issue-TODO" class="headerlink" title="sudo issue (TODO)"></a>sudo issue (TODO)</h2><p>在对方机器执行sudo需要把用户ccms加入到wheel组里面<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -aG wheel user</span><br></pre></td></tr></table></figure></p>
<p>sudo是ccms的密码，但是需要加入到wheel组里面<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible all -m copy -a &quot;src=/tmp/xu dest=/etc/xu3&quot; -u ccms  --ask-become-pass</span><br></pre></td></tr></table></figure></p>
<p>但是下面的重启会报错<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible all -a &quot;/sbin/reboot&quot; -u ccms --ask-become-pass 会报错</span><br></pre></td></tr></table></figure></p>
<h2 id="playbook"><a href="#playbook" class="headerlink" title="playbook"></a>playbook</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">-</span><br><span class="line">  hosts: all</span><br><span class="line">  name: &quot;install httpd&quot;</span><br><span class="line">  tasks:</span><br><span class="line">    -</span><br><span class="line">      name: &quot;install httpd*&quot;</span><br><span class="line">      yum: &quot;name=httpd state=latest&quot;</span><br></pre></td></tr></table></figure>
<p>上面是一个可以work的例子，安装一个httpd，最顶部的三个dash代表文档的开始，其他的dash可以单独一行也可以不单独一行</p>
<h2 id="ansible-tower"><a href="#ansible-tower" class="headerlink" title="ansible tower"></a>ansible tower</h2><p><a href="https://computingforgeeks.com/install-and-configure-ansible-tower-on-centos-rhel/" target="_blank" rel="noopener">https://computingforgeeks.com/install-and-configure-ansible-tower-on-centos-rhel/</a><br> /bin/ansible-tower-service {start|stop|restart|status}</p>
<h2 id="yaml"><a href="#yaml" class="headerlink" title="yaml"></a>yaml</h2><p>关于yaml中dash的解释，<a href="https://www.reddit.com/r/ansible/comments/5jhff3/when_to_use_dash_in_yaml/" target="_blank" rel="noopener">https://www.reddit.com/r/ansible/comments/5jhff3/when_to_use_dash_in_yaml/</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tasks:</span><br><span class="line">    - name: date/time stamp</span><br><span class="line">      command: /usr/bin/date</span><br><span class="line">      register: timestamp_start</span><br><span class="line">    - debug: var=timestamp_start</span><br><span class="line">    - name: another task</span><br></pre></td></tr></table></figure></p>
<p>dash表示一个list的开始，如果转换成json你可以看的很清楚有没有dash的差异<br><a href="https://onlineyamltools.com/convert-yaml-to-json" target="_blank" rel="noopener">https://onlineyamltools.com/convert-yaml-to-json</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://mengxu2018.github.io/2020/03/21/ansible-setup/" data-id="ck81l9zif0000mcuxw2s8xdh6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/automation/">automation</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-aliyun-yum源" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/03/21/aliyun-yum源/" class="article-date">
  <time datetime="2020-03-21T12:44:15.000Z" itemprop="datePublished">2020-03-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/21/aliyun-yum源/">aliyun yum仓库</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>mv /etc/yum.repos.d /etc/yum.repos.d-bak<br>mkdir /etc/yum.repos.d<br>cd /etc/yum.repos.d<br>wget <a href="http://mirrors.aliyun.com/repo/Centos-7.repo" target="_blank" rel="noopener">http://mirrors.aliyun.com/repo/Centos-7.repo</a><br>wget <a href="http://mirrors.aliyun.com/repo/epel-7.repo" target="_blank" rel="noopener">http://mirrors.aliyun.com/repo/epel-7.repo</a><br>yum clean all<br>yum repolist</p>
<p>如果要安装的软件比如docker不在这个源里面，就搜索阿里云yum docker<br>yum-config-manager –add-repo <a href="http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo" target="_blank" rel="noopener">http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://mengxu2018.github.io/2020/03/21/aliyun-yum源/" data-id="ck9t8cab30000p0ux5cd0cl12" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-aliyun-pip源" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/03/21/aliyun-pip源/" class="article-date">
  <time datetime="2020-03-21T12:44:15.000Z" itemprop="datePublished">2020-03-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/21/aliyun-pip源/">aliyun pip仓库</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>mkdir ~/.pip</p>
<p>cat &gt; ~/.pip/pip.conf &lt;&lt; EOF</p>
<p>[global]<br>trusted-host=mirrors.aliyun.com<br>index-url=<a href="https://mirrors.aliyun.com/pypi/simple/" target="_blank" rel="noopener">https://mirrors.aliyun.com/pypi/simple/</a></p>
<p>EOF</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://mengxu2018.github.io/2020/03/21/aliyun-pip源/" data-id="ck9t8cabl0002p0uxz2aqvtlt" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-istio-adapter" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/15/istio-adapter/" class="article-date">
  <time datetime="2020-02-15T12:31:52.000Z" itemprop="datePublished">2020-02-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/15/istio-adapter/">istio mixer adapter setup</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="安装troubleshooting"><a href="#安装troubleshooting" class="headerlink" title="安装troubleshooting"></a>安装troubleshooting</h1><p><a href="https://github.com/istio/istio/wiki/Mixer-Out-Of-Process-Adapter-Walkthrough" target="_blank" rel="noopener">https://github.com/istio/istio/wiki/Mixer-Out-Of-Process-Adapter-Walkthrough</a></p>
<h2 id="step1-‘inconsistent-vendoring’-error"><a href="#step1-‘inconsistent-vendoring’-error" class="headerlink" title="step1 ‘inconsistent vendoring’ error"></a>step1 ‘inconsistent vendoring’ error</h2><p><a href="https://github.com/golang/go/issues/34657" target="_blank" rel="noopener">https://github.com/golang/go/issues/34657</a><br>解决的办法就是export GOROOT=单独的go目录，不要go下面的src有istio的那个<br>export GOROOT=/root/software/go</p>
<h2 id="Step-2-BUILD-WITH-CONTAINER-1-make-gen"><a href="#Step-2-BUILD-WITH-CONTAINER-1-make-gen" class="headerlink" title="Step 2 BUILD_WITH_CONTAINER=1 make gen"></a>Step 2 BUILD_WITH_CONTAINER=1 make gen</h2><p>Just to ensure everything is good, let’s generate the file and build the code. Go to the top of the repo and do:<br><code>BUILD_WITH_CONTAINER=1 make gen</code><br>实际上是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export BUILD_WITH_CONTAINER=1</span><br><span class="line">cd /root/kube/go/src/istio.io/istio</span><br><span class="line">make gen</span><br></pre></td></tr></table></figure></p>
<p>不过这个里面有个证书的错误，暂时没有影响，可以再观察</p>
<h2 id="step3-mygrpcadapter"><a href="#step3-mygrpcadapter" class="headerlink" title="step3 mygrpcadapter"></a>step3 mygrpcadapter</h2><p>mygrpcadapter.go:40:2: no matching versions for query “latest”</p>
<p>“istio.io/istio/pkg/log” -&gt; “istio.io/pkg/log”</p>
<h2 id="step-5-hang-on"><a href="#step-5-hang-on" class="headerlink" title="step 5 hang on"></a>step 5 hang on</h2><p>第五步中的 pushd $ISTIO/istio &amp;&amp; make mixs貌似需要minikube服务是shutdown的时候才可以安装成功，<br>但是docker daemon要启动</p>
<p>mixc，mixs都在/root/kube/go/src/istio.io/istio/out/linux_amd64/下面，<br>也就是说在$ISTIO/istio/out/linux_amd64下面，<br>但是文档里面说的是在$GOPATH/out/linux_amd64/release/</p>
<h2 id="go-build"><a href="#go-build" class="headerlink" title="go build"></a>go build</h2><p>When compiling multiple packages or a single non-main package, build compiles the packages but discards the resulting object, serving only as a check that the packages can be built.</p>
<p>go build编译main package的会生成执行文件，非main的就没有输出，just 验证下</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>按照这个文章弄好的其实还是需要打包部署成一个kubenetes的service， 不可能每次都是cmd下面的脚本运行adapter，<br>其实就是把cmd下面的go文件编译一下，部署成kubernetes里面的service。</p>
<p>mygrpcadapter/config下面的.proto文件其实是为了生成mygrpcadapter.yaml，这个文件也是kubernetes的一个资源，需要kubectl apply<br>至于config/config.proto里面的Params是给sample_operator_cfg.yaml里面的kind: handler使用的，<br>sample_operator_cfg.yaml里面的instance用了metric template，会封装数据参数传给adapter。<br>The operator that configures Istio controls how this template-specific data is constructed and dispatched to adapters.<br><a href="https://github.com/istio/istio/wiki/Mixer-Out-Of-Process-Adapter-Dev-Guide" target="_blank" rel="noopener">https://github.com/istio/istio/wiki/Mixer-Out-Of-Process-Adapter-Dev-Guide</a></p>
<p>adapter的rule也会定义规则，比如只允许特定的host访问，<br>到时候浏览器访问某个service的时候，首先gateway会转发到特定的service，这个是gateway和virtualservice来做的，<br>adapter这边的rule是另外一码事</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://mengxu2018.github.io/2020/02/15/istio-adapter/" data-id="ck6yot4r70000csuxr6x4hgpc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/istio/">istio</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-minikube-intro" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/27/minikube-intro/" class="article-date">
  <time datetime="2020-01-27T12:44:15.000Z" itemprop="datePublished">2020-01-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/01/27/minikube-intro/">使用minikube学习环境</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="minikube"><a href="#minikube" class="headerlink" title="minikube"></a>minikube</h2><p><a href="https://kubernetes.io/docs/setup/learning-environment/minikube/" target="_blank" rel="noopener">https://kubernetes.io/docs/setup/learning-environment/minikube/</a></p>
<p>安装好centos后因为之前设置静态ip的时候对vmware进行了设置，所以现在除了nmtui之外，也必须修改/etc/sysconfig/network-scripts/ifcfg-ens33</p>
<p>yum install -y yum-utils \<br>  device-mapper-persistent-data \<br>  lvm2</p>
<p>yum-config-manager \<br>      –add-repo \<br>      <a href="https://download.docker.com/linux/centos/docker-ce.repo" target="_blank" rel="noopener">https://download.docker.com/linux/centos/docker-ce.repo</a></p>
<p>yum install -y docker-ce</p>
<p>systemctl disable firewalld</p>
<p>swapoff -a<br>vi /etc/fstab<br>注释掉下面这一行永久关闭swap</p>
<p>#/dev/mapper/centos-swap swap                    swap    defaults        0 0</p>
<p>sysctl net.bridge.bridge-nf-call-iptables=1</p>
<p>minikube start –vm-driver=none（not suggest,可能会有kubernetes版本不被istio支持的问题)<br>minikube start –memory=4096 –cpus=4 –kubernetes-version=v1.15 –vm-driver=none(–kubernetes-version可以不带，有时候带会有错误)<br>minikube start –memory=6096 –cpus=4 –vm-driver=none<br>minikube dashboard –url</p>
<p>minikube start –memory=3072mb –cpus=2 –vm-driver=docker</p>
<p>下面是部署一个sample<br>kubectl create deployment hello-minikube –image=k8s.gcr.io/echoserver:1.10<br>kubectl expose deployment hello-minikube –type=NodePort –port=8080<br>kubectl get pod<br>minikube service hello-minikube –url<br>kubectl describe services hello-minikube<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# kubectl describe services hello-minikube</span><br><span class="line">Name:                     hello-minikube</span><br><span class="line">Namespace:                default</span><br><span class="line">Labels:                   app=hello-minikube</span><br><span class="line">Annotations:              &lt;none&gt;</span><br><span class="line">Selector:                 app=hello-minikube</span><br><span class="line">Type:                     NodePort</span><br><span class="line">IP:                       10.96.132.162</span><br><span class="line">Port:                     &lt;unset&gt;  8080/TCP</span><br><span class="line">TargetPort:               8080/TCP</span><br><span class="line">NodePort:                 &lt;unset&gt;  31451/TCP</span><br><span class="line">Endpoints:                172.17.0.4:8080</span><br><span class="line">Session Affinity:         None</span><br><span class="line">External Traffic Policy:  Cluster</span><br><span class="line">Events:                   &lt;none&gt;</span><br></pre></td></tr></table></figure></p>
<p>Endpoints:                172.17.0.4:8080是内网的<br>NodePort:                 <unset>  31451/TCP 是外网的</unset></p>
<p>kubectl get namespace<br>kubectl get pods -n istio-system<br>kubectl describe pod  -n istio-system istio-galley-69674cb559-chxtg<br>kubectl logs -n istio-system istio-policy-5cdbc47674-q7flx</p>
<h2 id="istio-gateway"><a href="#istio-gateway" class="headerlink" title="istio gateway"></a>istio gateway</h2><p>kubectl get gateway<br>istioctl -n istio-system pc routes istio-ingressgateway-5db78457f5-h49tm –name http.80 -o json</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: networking.istio.io/v1alpha3</span><br><span class="line">kind: Gateway</span><br><span class="line">metadata:</span><br><span class="line">  name: bookinfo-gateway</span><br><span class="line">spec:</span><br><span class="line">  selector:</span><br><span class="line">    istio: ingressgateway # use istio default controller</span><br><span class="line">  servers:</span><br><span class="line">  - port:</span><br><span class="line">      number: 80</span><br><span class="line">      name: http</span><br><span class="line">      protocol: HTTP</span><br><span class="line">    hosts:</span><br><span class="line">    - &quot;*&quot;</span><br></pre></td></tr></table></figure>
<p>In the gateway resource, the selector refers to Istio’s default ingress controller by its label, in which the key of the label is istio and the value is ingressgateway<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# kubectl get pods -listio=ingressgateway -n istio-system</span><br><span class="line">NAME                                    READY   STATUS    RESTARTS   AGE</span><br><span class="line">istio-ingressgateway-649f9646d4-nc88s   1/1     Running   0          10h</span><br><span class="line"></span><br><span class="line">感觉像是默认是要去和gateway resource同一个namespace下面去找gateway controller pod，找不到就找istio-system下面这个</span><br><span class="line"></span><br><span class="line">https://stackoverflow.com/questions/51835752/how-to-create-custom-istio-ingress-gateway-controller</span><br><span class="line">上面这个文章讲的比较详细，如果不是默认的istio: ingressgateway的话，需要gateway resource和gateway controller的namespace一致,</span><br><span class="line">或者可以理解为gateway resource的默认namespace就是istio-system</span><br><span class="line"></span><br><span class="line">https://discuss.istio.io/t/istio-ingressgateway-controller-and-namespaces/1217/5 的一个回答</span><br><span class="line">In 1.1 this is changing a bit - the Gateway resource should be in same namespace as the gateway(the service, deployment, certificates). The default is istio-system - but you can run it in other namespace, or in multiple namespaces if you need to. Each namespace will have a different load balancer IP and may handle different domains with different certs.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">https://blog.jayway.com/2018/10/22/understanding-istio-ingress-gateway-in-kubernetes/</span><br></pre></td></tr></table></figure></p>
<p>但是对于官网下面的话不理解<br>One or more labels that indicate a specific set of pods/VMs on which this gateway configuration should be applied. The scope of label search is restricted to the configuration namespace in which the the resource is present. In other words, the Gateway resource must reside in the same namespace as the gateway workload instance.</p>
<p>最后这里总结下：<br>gateway resource和gateway controller pod是两个东西，前者可以通过kubeclt get gateway获得，后者其实就是一个pod，<br>我们平常一般创建gateway resource的时候默认没有指定namespace的时候是默认为isito-system，比如istio: ingressgateway，他会去<br>istio-system这个namespace下面去找label为istio: ingressgateway的gateway pod<br>如果要自己创建一个自定义的gateway controller pod的话，参考<a href="https://stackoverflow.com/questions/51835752/how-to-create-custom-istio-ingress-gateway-controller，简单说就是需要创建一个新的gateway" target="_blank" rel="noopener">https://stackoverflow.com/questions/51835752/how-to-create-custom-istio-ingress-gateway-controller，简单说就是需要创建一个新的gateway</a> pod资源，这个资源会在某个namespace下面，<br>然后在创建gateway resource并且指定他的namespace，同时指定selector匹配gateway pod资源</p>
<p><a href="https://istio.io/blog/2019/custom-ingress-gateway/这个文章的第七点说明type" target="_blank" rel="noopener">https://istio.io/blog/2019/custom-ingress-gateway/这个文章的第七点说明type</a>: LoadBalancer可以创建一个gateway controller pod，<br>在上面的so文章也有人回答‘In fact, it is very simple. Istio’s ingress is just a regular Kubernetes Service of “Load Balancer” type.’<br>但是有待验证</p>
<p>关于gateway，这个文章<a href="https://istio.io/docs/tasks/traffic-management/ingress/ingress-control/最好，" target="_blank" rel="noopener">https://istio.io/docs/tasks/traffic-management/ingress/ingress-control/最好，</a><br>在minikube上面其实就是默认的ingress gateway通过nodeport暴露出来，所以访问具体的service其实是访问的这个gateway，<br>ingress说的其实就是这个gateway。<br>VirtualService里面的hosts应该说的重复字段，实际上destination里也有这个字段<br><a href="https://blog.csdn.net/kozazyh/article/details/81477629这里就说明了这个重复" target="_blank" rel="noopener">https://blog.csdn.net/kozazyh/article/details/81477629这里就说明了这个重复</a></p>
<h2 id="troubleshooting"><a href="#troubleshooting" class="headerlink" title="troubleshooting"></a>troubleshooting</h2><h3 id="network-issue-due-to-iptables"><a href="#network-issue-due-to-iptables" class="headerlink" title="network issue due to iptables"></a>network issue due to iptables</h3><p>kubectl get pods -n istio-system<br>kubectl get pods -n kube-system<br>上面两个namespace下面的pod如果有下面的问题的话，就刷新iptables<br>none: coredns CrashLoopBackOff: dial tcp ip:443: connect: no route to host #4350</p>
<p>systemctl stop kubelet<br>systemctl stop docker<br>iptables –flush<br>iptables -tnat –flush<br>systemctl start kubelet<br>systemctl start docker</p>
<h3 id="multiply-container-due-to-the-istio"><a href="#multiply-container-due-to-the-istio" class="headerlink" title="multiply container due to the istio"></a>multiply container due to the istio</h3><p>When retrieving logs for pods that have multiple containers, you need to specify the container you want the logs for.<br>For example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl logs productpage-v1-84f77f8747-8zklx -c productpage</span><br></pre></td></tr></table></figure></p>
<p>The reason is because Istio adds a second container to deployments via the istio-sidecar-injector. This is what adds the envoy proxy in front of all of your pods traffic.</p>
<h3 id="why-kube-dns-and-core-dns-both-exist"><a href="#why-kube-dns-and-core-dns-both-exist" class="headerlink" title="why kube-dns and core-dns both exist"></a>why kube-dns and core-dns both exist</h3><p>kubectl get deployments -n kube-system<br>kubectl get pods -n kube-public<br>上面得到coredns<br>kubectl get svc -n kube-system<br>上面得到kube-dns<br>但是如果kubectl describe -n kube-system service/kube-dns就会发现<br>他的Selector: k8s-app=kube-dns其实就是指向kubectl get pods -lk8s-app=kube-dns -n kube-system</p>
<h2 id="reference"><a href="#reference" class="headerlink" title="reference"></a>reference</h2><p><a href="https://istio.io/docs/examples/bookinfo/" target="_blank" rel="noopener">https://istio.io/docs/examples/bookinfo/</a><br><a href="https://www.cnblogs.com/psy-code/p/9311104.html" target="_blank" rel="noopener">https://www.cnblogs.com/psy-code/p/9311104.html</a><br>kubectl get node -o wide</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://mengxu2018.github.io/2020/01/27/minikube-intro/" data-id="ck5wdwasg00013kji7b281v3t" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kubernetes/">kubernetes</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-不能启动k8s" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/27/不能启动k8s/" class="article-date">
  <time datetime="2020-01-27T12:44:15.000Z" itemprop="datePublished">2020-01-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/01/27/不能启动k8s/">failed to start k8s</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>可能是证书过期导致的，因为之前配置好的环境只要执行下面两个命令（在三台机器)<br>systemctl enable kubelet<br>systemctl enable docker</p>
<p>然后分别启动两个work node，然后过几分钟启动master node</p>
<p><a href="https://kubernetes.io/docs/tasks/administer-cluster/kubeadm/kubeadm-certs/#manual-certificate-renewal" target="_blank" rel="noopener">https://kubernetes.io/docs/tasks/administer-cluster/kubeadm/kubeadm-certs/#manual-certificate-renewal</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://mengxu2018.github.io/2020/01/27/不能启动k8s/" data-id="ck5wdwasi00033kji957fop8c" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kubernetes/">kubernetes</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-machine-learning-basic" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/12/31/machine-learning-basic/" class="article-date">
  <time datetime="2019-12-31T14:51:52.000Z" itemprop="datePublished">2019-12-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/12/31/machine-learning-basic/">python machine learning basic</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://keras.io/examples/image_ocr/" target="_blank" rel="noopener">https://keras.io/examples/image_ocr/</a><br>这个研究下，主要是要安装  <a href="https://cairographics.org/" target="_blank" rel="noopener">https://cairographics.org/</a></p>
<p>import sys<br>print(sys.path)<br>其实还是path的问题，主要是安装需要的dll到path里面，如果是redhat比较简单，win10要研究下</p>
<p><a href="https://www.geeksforgeeks.org/python-image-classification-using-keras/" target="_blank" rel="noopener">https://www.geeksforgeeks.org/python-image-classification-using-keras/</a><br><a href="https://stackoverflow.com/questions/43469281/how-to-predict-input-image-using-trained-model-in-keras" target="_blank" rel="noopener">https://stackoverflow.com/questions/43469281/how-to-predict-input-image-using-trained-model-in-keras</a></p>
<p>image classification<br><a href="https://github.com/mengxu2018/machine-learning" target="_blank" rel="noopener">https://github.com/mengxu2018/machine-learning</a></p>
<p>看这个文章<br><a href="https://my.oschina.net/andyfeng/blog/2208657" target="_blank" rel="noopener">https://my.oschina.net/andyfeng/blog/2208657</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://mengxu2018.github.io/2019/12/31/machine-learning-basic/" data-id="ck5wdwas500003kji1sgtim3e" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AI/">AI</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java-servlet" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/26/java-servlet/" class="article-date">
  <time datetime="2019-10-26T03:42:16.000Z" itemprop="datePublished">2019-10-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/26/java-servlet/">java servlet</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这个文章主要说明servlet2.5, 3.0, 3.1的差异</p>
<h2 id="servlet2-5"><a href="#servlet2-5" class="headerlink" title="servlet2.5"></a>servlet2.5</h2><p><img src="/images/tomcat-servlet-version.png" alt="tomcat-nio"><br>tomcat本身在servlet2.5也就是tomcat6的时候就已经实现了nio，但是仅仅在建立连接和解析request header方面nio，这个在上图可以看的很清楚</p>
<h2 id="servlet3-0"><a href="#servlet3-0" class="headerlink" title="servlet3.0"></a>servlet3.0</h2><p>在servlet3.0就是tomcat7以后，实现了异步的servlet，但是这个异步仅仅是对request的处理是异步的，就是将这次请求走到servlet的时候放到一个单独的线程池，不要占用container本身处理请求的线程池。这个感觉提升并不大，因为对request stream io本身还是普通的io, Servlet 3.0 allowed asynchronous request processing but only traditional I/O was permitted. In other words, with Servlet 3.0, only the request processing part became async, but not the I/O for serving the requests and responses. If enough threads block, this results in thread starvation and affects performance. 3.0只能叫异步，3.1才是nio<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import javax.servlet.AsyncContext;</span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.annotation.WebServlet;</span><br><span class="line">import javax.servlet.http.HttpServlet;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">@WebServlet(value = &quot;/simpleAsync&quot;, asyncSupported = true)</span><br><span class="line">public class SimpleAsyncHelloServlet extends HttpServlet &#123;</span><br><span class="line"></span><br><span class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        AsyncContext asyncContext = request.startAsync();</span><br><span class="line"></span><br><span class="line">        asyncContext.start(() -&gt; &#123;</span><br><span class="line">            new LongRunningProcess().run();</span><br><span class="line">            try &#123;</span><br><span class="line">                asyncContext.getResponse().getWriter().write(&quot;Hello World!&quot;);</span><br><span class="line">            &#125; catch (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            asyncContext.complete();</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>此时，我们先通过request.startAsync()获取到该请求对应的AsyncContext，然后调用AsyncContext的start()方法进行异步处理，处理完毕后需要调用complete()方法告知Servlet容器。start()方法会向Servlet容器另外申请一个新的线程（可以是从Servlet容器中已有的主线程池获取，也可以另外维护一个线程池，不同容器实现可能不一样），然后在这个新的线程中继续处理请求，而原先的线程将被回收到主线程池中。事实上，这种方式对性能的改进不大，因为如果新的线程和初始线程共享同一个线程池的话，相当于闲置下了一个线程，但同时又占用了另一个线程。</p>
<h2 id="servlet3-1"><a href="#servlet3-1" class="headerlink" title="servlet3.1"></a>servlet3.1</h2><p>在servlet3.1后，就是tomcat8以后实现了non blocking io, With Servlet 3.1 NIO, this problem is solved by ReadListener and WriteListener interfaces. These are registered in ServletInputStream and ServletOutputStream. The listeners have callback methods that are invoked when the content is available to be read or can be written without the servlet container blocking on the I/O threads. So these I/O threads are freed up and can now serve other request increasing performance.<br>参考例子 <a href="https://github.com/mengxu2018/java-code-sample/tree/master/servlet3.1" target="_blank" rel="noopener">https://github.com/mengxu2018/java-code-sample/tree/master/servlet3.1</a></p>
<h2 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h2><p><a href="https://www.cnblogs.com/davenkin/p/async-servlet.html" target="_blank" rel="noopener">https://www.cnblogs.com/davenkin/p/async-servlet.html</a><br><img src="/images/servlet-spec.png" alt="servlet-spec"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://mengxu2018.github.io/2019/10/26/java-servlet/" data-id="ck272f0uh001ky0ji86jqz9k6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AI/">AI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO/">IO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OS/">OS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cloud/">cloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/database/">database</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dubbo/">dubbo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grpc/">grpc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hadoop/">hadoop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hardware/">hardware</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hbase/">hbase</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/istio/">istio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jvm/">jvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kafka/">kafka</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kubernetes/">kubernetes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/powershell/">powershell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/search/">search</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/security/">security</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spark/">spark</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/">spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring-boot/">spring-boot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tomcat/">tomcat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/win10/">win10</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zookeeper/">zookeeper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络/">网络</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/AI/" style="font-size: 11.43px;">AI</a> <a href="/tags/IO/" style="font-size: 10px;">IO</a> <a href="/tags/OS/" style="font-size: 15.71px;">OS</a> <a href="/tags/automation/" style="font-size: 11.43px;">automation</a> <a href="/tags/cloud/" style="font-size: 10px;">cloud</a> <a href="/tags/database/" style="font-size: 11.43px;">database</a> <a href="/tags/docker/" style="font-size: 11.43px;">docker</a> <a href="/tags/dubbo/" style="font-size: 10px;">dubbo</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/grpc/" style="font-size: 10px;">grpc</a> <a href="/tags/hadoop/" style="font-size: 10px;">hadoop</a> <a href="/tags/hardware/" style="font-size: 11.43px;">hardware</a> <a href="/tags/hbase/" style="font-size: 10px;">hbase</a> <a href="/tags/istio/" style="font-size: 10px;">istio</a> <a href="/tags/java/" style="font-size: 18.57px;">java</a> <a href="/tags/javascript/" style="font-size: 11.43px;">javascript</a> <a href="/tags/jvm/" style="font-size: 11.43px;">jvm</a> <a href="/tags/kafka/" style="font-size: 20px;">kafka</a> <a href="/tags/kubernetes/" style="font-size: 17.14px;">kubernetes</a> <a href="/tags/linux/" style="font-size: 17.14px;">linux</a> <a href="/tags/maven/" style="font-size: 11.43px;">maven</a> <a href="/tags/mongodb/" style="font-size: 10px;">mongodb</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/powershell/" style="font-size: 15.71px;">powershell</a> <a href="/tags/python/" style="font-size: 11.43px;">python</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/search/" style="font-size: 12.86px;">search</a> <a href="/tags/security/" style="font-size: 14.29px;">security</a> <a href="/tags/spark/" style="font-size: 20px;">spark</a> <a href="/tags/spring/" style="font-size: 12.86px;">spring</a> <a href="/tags/spring-boot/" style="font-size: 10px;">spring-boot</a> <a href="/tags/tomcat/" style="font-size: 10px;">tomcat</a> <a href="/tags/win10/" style="font-size: 10px;">win10</a> <a href="/tags/zookeeper/" style="font-size: 10px;">zookeeper</a> <a href="/tags/网络/" style="font-size: 10px;">网络</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/03/06/kubernetes-basic-definition/">kubernetes basic</a>
          </li>
        
          <li>
            <a href="/2021/03/04/spring-boot-debug/">spring boot debug</a>
          </li>
        
          <li>
            <a href="/2020/07/16/postgres-cluster/">postgres cluster</a>
          </li>
        
          <li>
            <a href="/2020/06/27/elasticsearch-remote-access/">elasticsearch cluster</a>
          </li>
        
          <li>
            <a href="/2020/06/22/powershell概念/">powershell 概念</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 xu, hang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>